Good question üëç
What you want is **conditional rendering**: show the spinner **only while reloading / fetching**, and remove it when the data is ready.

Below are the **clean, correct patterns** used in React.

---

## ‚úÖ 1Ô∏è‚É£ Spinner while fetching data (most common)

Use `useState` + `useEffect`.

```jsx
import { useEffect, useState } from "react";

function MyComponent() {
  const [loading, setLoading] = useState(true);
  const [data, setData] = useState(null);

  useEffect(() => {
    fetch("https://api.example.com/data")
      .then(res => res.json())
      .then(result => {
        setData(result);
        setLoading(false); // stop spinner
      })
      .catch(() => {
        setLoading(false); // stop spinner even on error
      });
  }, []);

  if (loading) {
    return (
      <div className="d-flex justify-content-center align-items-center vh-100">
        <div className="spinner-border text-dark" role="status">
          <span className="visually-hidden">Loading...</span>
        </div>
      </div>
    );
  }

  return (
    <div>
      {/* your real content */}
      <h1>Data loaded</h1>
    </div>
  );
}

export default MyComponent;
```

üëâ Spinner **appears while fetching**
üëâ Spinner **disappears automatically** when done

---

## ‚úÖ 2Ô∏è‚É£ Spinner on button click (manual reload)

Useful for ‚ÄúReload‚Äù or ‚ÄúSubmit‚Äù buttons.

```jsx
function ReloadExample() {
  const [loading, setLoading] = useState(false);

  const reloadData = async () => {
    setLoading(true);

    await fetch("https://api.example.com/data");

    setLoading(false);
  };

  return (
    <>
      <button onClick={reloadData} disabled={loading}>
        {loading ? "Loading..." : "Reload"}
      </button>

      {loading && (
        <div className="spinner-border text-dark ms-2" role="status" />
      )}
    </>
  );
}
```

---

## ‚úÖ 3Ô∏è‚É£ Spinner overlay (page still visible)

Best UX for dashboards.

```jsx
{loading && (
  <div className="position-fixed top-0 start-0 w-100 h-100
                  d-flex justify-content-center align-items-center
                  bg-white bg-opacity-75">
    <div className="spinner-border text-primary" role="status" />
  </div>
)}
```

---

## ‚ùå What NOT to do

* Don‚Äôt show spinner without a `loading` state
* Don‚Äôt forget to set `loading` to `false`
* Don‚Äôt block UI forever on fetch errors

---

## üß† Rule of thumb

| Situation         | Spinner type        |
| ----------------- | ------------------- |
| Initial page load | Full-screen spinner |
| Fetching new data | Inline spinner      |
| Button action     | Button spinner      |
| Dashboard refresh | Overlay spinner     |

---

If you want, tell me:

* Are you using **fetch or axios**?
* Do you want **page-wide** or **component-only** loading?

I‚Äôll tailor the exact code for your case üöÄ


import { useEffect, useState } from "react";
import axios from "../axiosConfig";
import NavAfterLogin from "./NavAfterLogin";
import { ToastContainer, toast } from "react-toastify";
import "react-toastify/dist/ReactToastify.css";

function UserList() {
    const [user, setUser] = useState(null);
    const [userList, setUserList] = useState([]);
    const [editUser, setEditUser] = useState(null);
    const [search, setSearch] = useState("");

    // FETCH USERS
    useEffect(() => {
        axios.get("/getAllUsers")
            .then(res => setUserList(res.data))
            .catch(() => setUserList([]));

        axios.get("/test")
            .then(res => setUser(res.data))
            .catch(() => setUser(null));
    }, []);

    // DELETE USER
    const deleteUser = (email) => {

        const confirmDelete = window.confirm("Are you sure you want to delete this user?");
        if (!confirmDelete) return;

        axios.delete(`/users/${email}`, { withCredentials: true })
            .then(res => {
                setUserList(res.data);
                toast("User deleted successfully!");
            })
            .catch(err => {
                console.log(err);
                toast("Failed to delete user");
            });
    };

    // UPDATE USER
    const submitUpdate = (e) => {
        e.preventDefault();

        axios.put(`/user/${editUser.email}`, editUser, { withCredentials: true })
            .then(res => {
                setUserList(res.data);
                setEditUser(null);
                toast("User updated successfully!");
            })
            .catch(err => {
                console.log(err);
                toast("Update failed");
            });
    };

    const filteredUsers = userList.filter(u => {
        const q = search.toLowerCase();
        const idText = String(u.id || "").toLowerCase();
        const displayId = String(`BAC00${u.id || ""}`).toLowerCase();

        return (
            (u.name || "").toLowerCase().includes(q) ||
            (u.email || "").toLowerCase().includes(q) ||
            String(u.phone || "").toLowerCase().includes(q) ||
            String(u.dob || "").toLowerCase().includes(q) ||
            idText.includes(q) ||
            displayId.includes(q)
        );
    });

    return (
        <>
            <NavAfterLogin name={user?.name || ""} />

            {/* TOASTER */}
            <ToastContainer
                position="top-right"
                autoClose={2000}
                hideProgressBar
                closeOnClick
                pauseOnHover
                toastStyle={{
                    backgroundColor: "#fff",
                    color: "#198754",
                    fontSize: "13px",
                    padding: "6px 10px",
                    border: "1px solid #198754",
                    borderRadius: "6px"
                }}
            />

            <div className="container mt-4">

                {/* SEARCH */}
                <div className="row mb-3">
                    <div className="col-md-4 ms-auto">
                        <input
                            type="text"
                            className="form-control shadow-sm"
                            placeholder="Search users..."
                            value={search}
                            onChange={(e) => setSearch(e.target.value)}
                        />
                    </div>
                </div>

                {/* UPDATE MODAL */}
                {editUser && (
                    <div className="modal fade show d-block" style={{ background: "rgba(0,0,0,0.5)" }}>
                        <div className="modal-dialog">
                            <div className="modal-content p-4 rounded-3">

                                <h5 className="mb-3 text-success">Update User</h5>

                                <form onSubmit={submitUpdate}>
                                    <input
                                        className="form-control mb-2"
                                        value={editUser.name}
                                        onChange={e => setEditUser({ ...editUser, name: e.target.value })}
                                        placeholder="Name"
                                        required
                                    />

                                    <input
                                        className="form-control mb-2"
                                        value={editUser.email}
                                        onChange={e => setEditUser({ ...editUser, email: e.target.value })}
                                        placeholder="Email"
                                        required
                                    />

                                    <input
                                        type="date"
                                        className="form-control mb-2"
                                        value={editUser.dob || ""}
                                        onChange={e => setEditUser({ ...editUser, dob: e.target.value })}
                                    />

                                    <input
                                        className="form-control mb-3"
                                        value={editUser.phone}
                                        onChange={e => setEditUser({ ...editUser, phone: e.target.value })}
                                        placeholder="Mobile Number"
                                    />

                                    <div className="text-end">
                                        <button className="btn btn-success btn-sm me-2">Save</button>
                                        <button
                                            type="button"
                                            className="btn btn-secondary btn-sm"
                                            onClick={() => setEditUser(null)}
                                        >
                                            Cancel
                                        </button>
                                    </div>
                                </form>

                            </div>
                        </div>
                    </div>
                )}

                {/* TABLE */}
                <div className="table-responsive shadow-sm">
                    <table className="table table-hover align-middle">
                        <thead className="table-dark">
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>DOB</th>
                            <th>Phone</th>
                            <th className="text-center">Action</th>
                        </tr>
                        </thead>

                        <tbody>
                        {filteredUsers.length > 0 ? (
                            filteredUsers.map(u => (
                                <tr key={u.id}>
                                    <td>BAC00{u.id}</td>
                                    <td>{u.name}</td>
                                    <td>{u.email}</td>
                                    <td>{u.dob}</td>
                                    <td>{u.phone}</td>
                                    <td className="text-center">
                                        <button
                                            className="btn btn-warning btn-sm me-2"
                                            onClick={() => setEditUser(u)}
                                        >
                                            Update
                                        </button>

                                        <button
                                            className="btn btn-danger btn-sm"
                                            onClick={() => deleteUser(u.email)}
                                        >
                                            Delete
                                        </button>
                                    </td>
                                </tr>
                            ))
                        ) : (
                            <tr>
                                <td colSpan="6" className="text-center py-3">
                                    No users found
                                </td>
                            </tr>
                        )}
                        </tbody>
                    </table>
                </div>

            </div>
        </>
    );
}

export default UserList;
